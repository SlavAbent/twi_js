const modalElems=(e,t,o,n)=>{const l=document.querySelector(e),i=document.querySelector(t),c=document.querySelector(o),r=document.querySelector(n);l.addEventListener("click",()=>{i.classList.add("modal__active")}),c.addEventListener("click",()=>{i.classList.remove("modal__active")}),i.addEventListener("click",e=>{e.target===r&&i.classList.remove("modal__active")})};modalElems(".leftside__modal_tweet",".modal__tweets",".close__modal",".overlay__tweets"),modalElems(".profile__imgBlock",".modal__profile",".close__modal",".overlay__profile");const cardWrapper=document.querySelector(".mainside__tweeter"),addTweet=document.querySelector(".mainside__tweets"),tweetBlock=document.querySelector(".tweets__desc-text"),tweetBtn=document.querySelector(".tweets__sub"),modal=document.querySelector(".modal__tweets"),nameProfile=document.querySelector(".profile__imgBlock-a"),nickname=document.querySelector(".profile__imgBlock-p"),date=document.querySelector(".tweet__info-time"),logo=document.querySelector(".tweet__logo-img"),tweetIcon=document.querySelector(".tweets__icon"),tweetInfoImg=document.querySelector(".tweet__info-img"),tweetInfoImgMain=document.querySelector(".tweet__info-img"),mainSideTweeter=document.querySelector(".mainside__tweeter"),getData=async function(e){const t=await fetch(e);if(!t.ok)throw new Error(`Ошибка по адресу ${e}, \n          статус ошибки  ${t.status}!`);return await t.json()};function createCards({imgLogo:e,img:t,userName:o,nickname:n,postDate:l,text:i,likes:c,comments:r}){cardWrapper.insertAdjacentHTML("beforeend",`\n        <div class="mainside__tweeter-tweet">\n            <div class="tweet__info-head">\n                <div class="tweet__logo">\n                    <img src="${e}" class="tweet__logo-img" alt="logo">\n                </div>\n                <div class="tweet__info">\n                    <div class="tweet__info-block">\n                        <p class="tweet__info-nickname">${o}</p>\n                        <p class="tweet__info-adress">@${n}</p>\n                        <p class="tweet__info-time">${l}</p>\n                    </div>\n                    <div class="tweet__info-settings">&#10033;</div>\n                </div>\n            </div>\n            <div class="tweet__info-body">\n                <p class="tweet__info-p">${i}</p>\n                <img src="${t}" class="tweet__info-img" alt="">\n            </div>\n            <div class="tweet__info-footer">\n                <div class="tweet__info-footer-comments">\n                    <svg viewBox="0 0 24 24" class="tweet__comments-img"><g><path d="M14.046 2.242l-4.148-.01h-.002c-4.374 0-7.8 3.427-7.8 7.802 0 4.098 3.186 7.206 7.465 7.37v3.828c0 .108.044.286.12.403.142.225.384.347.632.347.138 0 .277-.038.402-.118.264-.168 6.473-4.14 8.088-5.506 1.902-1.61 3.04-3.97 3.043-6.312v-.017c-.006-4.367-3.43-7.787-7.8-7.788zm3.787 12.972c-1.134.96-4.862 3.405-6.772 4.643V16.67c0-.414-.335-.75-.75-.75h-.396c-3.66 0-6.318-2.476-6.318-5.886 0-3.534 2.768-6.302 6.3-6.302l4.147.01h.002c3.532 0 6.3 2.766 6.302 6.296-.003 1.91-.942 3.844-2.514 5.176z"></path></g></svg>\n                    <p class="tweet__comments-cnt">${r}</p>\n                </div>\n                <div class="tweet__info-footer-likes">\n                    <svg viewBox="0 0 24 24" class="tweet__likes-img"><g><path d="M12 21.638h-.014C9.403 21.59 1.95 14.856 1.95 8.478c0-3.064 2.525-5.754 5.403-5.754 2.29 0 3.83 1.58 4.646 2.73.814-1.148 2.354-2.73 4.645-2.73 2.88 0 5.404 2.69 5.404 5.755 0 6.376-7.454 13.11-10.037 13.157H12zM7.354 4.225c-2.08 0-3.903 1.988-3.903 4.255 0 5.74 7.034 11.596 8.55 11.658 1.518-.062 8.55-5.917 8.55-11.658 0-2.267-1.823-4.255-3.903-4.255-2.528 0-3.94 2.936-3.952 2.965-.23.562-1.156.562-1.387 0-.014-.03-1.425-2.965-3.954-2.965z"></path></g></svg>\n                    <p class="tweet__likes-cnt">${c}</p>\n                </div>\n            </div>\n        </div>\n    `),tweetLogo=cardWrapper.querySelector(".tweet__logo-img"),viewPosts()}function viewPosts(){tweetLogo.addEventListener("click",()=>{addTweet.style.display="none"})}function addTweets(){tweetBtn.addEventListener("click",()=>{createCards({imgLogo:imgUrl,userName:nameProfile.textContent,nickname:names(),text:tweetBlock.value,postDate:getDate(),img:imgUrl,comments:50,likes:100}),console.log("imgUrl",imgUrl),modal.classList.contains("modal__active")&&modal.classList.remove("modal__active")})}addTweets();const names=()=>{let e=nickname.textContent,t=e.length;return e.split("").slice(1,t).join("")};function init(){getData("./db/dataBase.json").then((function(e){e.forEach(createCards)}))}getDate=()=>(new Date).toLocaleString("ru",{year:"numeric",month:"long",day:"numeric",weekday:"long",timezone:"UTC",hour:"numeric",minute:"numeric",second:"numeric"}),imgMain=()=>{tweetIcon.addEventListener("click",()=>{imgUrl=prompt("Введите адрес изображения")})},imgMain(),init();const wrapper=document.querySelector(".wrapper"),login=document.querySelector(".login"),profileImgBlock=document.querySelector(".profile__imgBlock-a"),inputBtn=document.querySelector(".input__btn"),loginName=document.querySelector("#login__input-name"),loginPass=document.querySelector("#login__input-pass"),loginWrapper=document.querySelector(".login__wrapper"),profilesName=document.querySelector(".modal__input--named"),profilesPass=document.querySelector(".modal__input--password"),profileNickname=document.querySelector(".modal__input--nickname"),profileInfoName=document.querySelector(".modal__profile--name"),profileInfoPass=document.querySelector(".modal__profile--pass"),tweetImgLogin=document.querySelector(".tweets__icon-login");let parentImg=document.querySelector(".profile__imgBlock"),profileImgBlockImg=document.querySelector(".profile__imgBlock-img"),tweetsLogo=document.querySelector(".tweets__logo");function checkAuth(){wrapper.style.display="flex",login.style.display="none",lName=loginName.value,lPass=loginPass.value,lNick=profileNickname.value,profileImgBlock.textContent=lName,profilesName.value=lName,profilesPass.value=lPass,profileInfoName.textContent="Ваше  имя: "+lName,profileInfoPass.textContent="Ваш пароль: "+lPass,(""==lName&&""==lPass||""==lName||""==lPass)&&(wrapper.style.display="none",login.style.display="block",loginName.style.border="1px solid red",loginPass.style.border="1px solid red")}function autorized(){authAccess(),checkAuth()}function noAutorized(){wrapper.style.display="none",login.style.display="block",authAccess()}function authAccess(){auth?autorized():noAutorized()}inputBtn.addEventListener("click",checkAuth),imgLoginAuth=()=>{tweetImgLogin.addEventListener("click",()=>{const e=document.createElement("img");e.classList.add("profile__imgBlock-img"),e.src=prompt("Введите адрес вашей картинки"),parentImg.appendChild(e);const t=document.createElement("img");t.classList.add("tweets__logo-img"),t.src=e.src,tweetsLogo.appendChild(t)})},imgLoginAuth();const profileName=document.querySelector(".modal__input--named"),profilePass=document.querySelector(".modal__input--password"),profileNick=document.querySelector(".modal__input--nickname"),textName=document.querySelector(".modal__profile--name"),textPass=document.querySelector(".modal__profile--pass"),img=document.querySelector(".profile__imgBlock"),modalProfile=document.querySelector(".modal__profile"),modalBtn=document.querySelector(".modal__button");let dogNick=document.querySelector(".profile__imgBlock-p"),textNick=document.querySelector(".modal__profile--nickname"),tweetIconProfile=document.querySelector(".tweets__icon-profile");function renameProfileInfo(){let e=profileNick.value;dogNick.textContent="@"+e,textNick.textContent="Ваш новый никнейм: @"+profileNick.value}function saveInfoProfile(){modalProfile.classList.contains("modal__active")&&modalProfile.classList.remove("modal__active"),renameProfileInfo()}img.addEventListener("click",renameProfileInfo),modalBtn.addEventListener("click",saveInfoProfile),imgProfile=()=>{tweetIconProfile.addEventListener("click",()=>{profileImg=document.querySelector(".profile__imgBlock-img"),tweetsLogoImg=document.querySelector(".tweets__logo-img"),profileImg.src=prompt("Изменить картинку профиля"),tweetsLogoImg.src=profileImg.src,console.log(profileImg.src)})},imgProfile();